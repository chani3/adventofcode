#!/usr/bin/ruby

data = nil
if ARGV.length > 0
    filename = ARGV[0]
    File.open(filename, "r") { |file|
        data = file.readlines
    }
else
    data = DATA.readlines
end

p data.length
#2-letter codes on all 4 sides of both inside and outside
#gotta find them, connect the code to the actual portal point
#then find the shortest-path between the portals that have them
#then find the shorest combination of hops from AA to ZZ.

__END__
                                     V       Z       Q         X         Z Q     J     C                                         
                                     O       B       F         W         Z H     M     A                                         
  ###################################.#######.#######.#########.#########.#.#####.#####.#######################################  
  #...#...#.#.#...................#.....#...........#...#.....#...#.#...#.....#.....#...........#.......#.#...................#  
  ###.###.#.#.#####.#.###.###.#########.###########.###.#.#.###.###.###.#.#.#.###.#.#.###.#.###.###.#####.#.#########.#########  
  #...#.....#.#.....#.#.#.#...#.#.........#.........#...#.#.#...#.....#...#.#.#.#.#.#...#.#.#.#.#.....#.........#...#.....#.#.#  
  #.#.#####.#.###.#####.#####.#.#######.###.#.#######.###.#.#.#.#.#.#####.#####.###.###.#####.###.###.#####.#####.#.#######.#.#  
  #.#...#...#.#...#...#.....#.....#.#.....#.#...#...#.....#.#.#.#.#.......#.....#.#.#.#...#...#.....#...#.#...#...#.....#...#.#  
  #####.###.#.#######.#####.###.###.###.#######.#.#.#######.#.#######.#.#.#.#.###.#.#.#.###.#####.#######.#.###.#######.#.###.#  
  #.#.....#.....#.....#.................#.#.......#.#.....#.#...#...#.#.#...#.....#.#.........#.#...........#.#.......#.#...#.#  
  #.#.###.###.#######.###.###.#.###.#.#.#.#.#######.#.###.#.#.#.#.###.#############.#######.###.#.#######.###.#.#########.###.#  
  #...#...................#.#.#.#...#.#.#.....#.....#...#...#.#...#...........#.....#.................#.......#...............#  
  ###.#.#.#.#####.###.#.###.#####.#.###.#########.#####.###.###.#########.###.###.#.###.#####.#.#.#.###.#.#.#.#.#.###.#.#####.#  
  #.#.#.#.#...#.#...#.#.#.........#.#.#.......#.....#...#.....#...#.#.......#.#...#.#.......#.#.#.#.#.#.#.#.#...#...#.#.#.#.#.#  
  #.###########.#####.#.#.#.#.#######.#.#.#####.#.###.#####.###.#.#.#.#.###.#######.#.#.###.###.#.###.#.#.###.###.#######.#.###  
  #.#...#.........#...#.#.#.#.#.#.#...#.#...#...#.#.......#.#...#.#.#.#...#.#.......#.#.#...#...#...#.#.#.#.#.#.#.#.....#.#...#  
  #.#.###########.#.###.#######.#.###.#####.#.#########.###.#.###.#.#.#####.#####.#########.#####.###.###.#.#.#.###.#####.#.###  
  #.#.#.....#.........#.#.......#.#.........#.....#.......#.#...#.#.....#...#...........#.....#.#.#.....#.#.............#.....#  
  #.#.#####.#####.#####.#######.#.###.#######.#######.#######.###.###.#############.#######.###.#####.#############.#####.###.#  
  #...#.#.#.....#.....#.#...................#.......#.#.........#.#...#.#.#.....#.#.....#.......#.#.....#...#.#.#.....#.#.#...#  
  #.#.#.#.#.#################.#.###.#.###.###.#######.#########.#####.#.#.###.###.#.#####.#.#####.###.###.###.#.#######.#####.#  
  #.#.#.....#...#.#...#.......#.#...#...#.#...#.#.#.......#...#...#.....#.#...........#.#.#...#.#...#.#...#.....#.#.....#.#...#  
  #.#######.###.#.#.#################.###.#.#.#.#.###.#.#####.#.#####.###.###.#########.#.#.###.#.###.#.#####.###.#.#.###.###.#  
  #.#.#...........#.#.....#.....#.#.#...#.#.#.#.#...#.#...#...#...#.......#.#...#.......#.#...#.....#...#.#.......#.#.....#.#.#  
  #.#.###.###.#.###.#####.#####.#.#.#.#######.#.#.###.#######.#.#######.###.###.#.#.#.#####.#####.###.###.###.#########.###.#.#  
  #.#.#.#...#.#.#...#.#.......#.#...#.....#.....#.#.....#.......#...#.....#.....#.#.#...#.............#...#.......#.#...#...#.#  
  #.#.#.#######.###.#.###.#.#.#.#.#.#.###.###.###.###.#.#####.###.#.#.#######.###.#.#######.###.#.#.###.#.#.#.#.###.###.###.#.#  
  #.#.#.#.#.#.....#.#.#...#.#.....#...#.#...#.#.....#.#.#...#.....#.#...#...#.#...#.....#.#.#.#.#.#...#.#.#.#.#.#.#...#.#.#...#  
  #.#.#.#.#.###.###.#.#######.#.#.###.#.#.###.#.#.###.###.###.#####.###.###.#.#.###.#####.#.#.#########.#####.###.#.###.#.#.###  
  #...#...#...#...#...#.......#.#.#.....#.#.#...#.#.......#.....#...#...#.....#.#...#...#...#.#.#...#.....#.#.....#...#...#...#  
  #.#.###.###.#.###.#####.###########.#####.#####.#####.###.#####.###.#######.#.#.#####.#.###.#.###.#.#####.###.#####.###.###.#  
  #.#.#...#...........#.#...#.#...#...#.#...#.#...#.#...#...#...#...#.....#.#.#.#...#...........#.......#...#.#.#.#...#.#.#.#.#  
  #.#####.###.###.#####.#####.###.###.#.###.#.#.###.#.#########.###.###.###.#.#.###.#######.###.###.###.#.###.#.#.###.#.#.#.#.#  
  #.#.#.#.#...#.#.#...#.#.#.............#.........#.....#.............#...#.....#...#.......#.....#.#.#...#.....#...#.#.#.#...#  
  #.#.#.#.###.#.###.###.#.###.#.#######.#######.#######.#####.#########.###########.###.#############.#.#####.###.###.#.#.#.###  
  #...#.............#.#...#.#.#...#    R       N       E     F         H           K   X      #.#.#.....#.......#.#...#...#.#.#  
  #.###########.#####.###.#.#######    H       K       K     J         Q           R   W      #.#.#.#########.###.###.###.#.#.#  
  #...#.#...#...#.#.#...#.#.....#.#                                                           #.#.....#...#...#...#.#.#.#...#.#  
  #.###.###.###.#.#.#.###.#.#####.#                                                           #.#.#####.###.#####.#.#.#.#.###.#  
BI..#...#...#.#.......#.....#.....#                                                         MX....#.........#...#.#.#...#......MG
  #.#.#####.#.#.#########.#####.###                                                           #.#.#.#.#####.###.#.#.###.#.###.#  
  #.......#.........#.#.#.#...#....ZN                                                         #.#...#.#.........#...#.....#....KR
  ###.###.#.#.#######.#.#.#.#####.#                                                           #.#.#.###.#####.#.#.#.#.###.#.#.#  
  #.....#...#.#.#...#.#...#...#.#.#                                                         BQ..#.#.#...#.#...#.#.#.#.#...#.#.#  
  #.#########.#.#.###.###.#.#.#.#.#                                                           #.#########.#####.#.#.#.###.#.#.#  
  #...#.#...................#.....#                                                           #.#...#...#.#...#...#...#.#.#.#.#  
  #.###.#########################.#                                                           #####.###.#.#.###########.#######  
  #.#.........#...........#.....#.#                                                           #...#...#.....................#.#  
  #.###.#####.###.#######.#.###.###                                                           #.#####.###.#.#####.#.#######.#.#  
  #.#...#...#...#.#...#.....#.....#                                                         QX....#...#...#.#.#...#.....#.....#  
  #####.#.#####.#.#############.###                                                           #.#####.#.#####.#######.#.#.###.#  
  #.#.....#.....#...#...#.#.....#.#                                                           #.#.....#.#...#...#.....#.#.#....EK
  #.#####.#.#######.#.###.###.#.#.#                                                           #.#.###.#.#.#.###.###############  
MX........#.............#.#.#.#....LV                                                         #.....#...#.#.#...#.#.....#...#.#  
  ###.#####.#####.#.#####.#.#.###.#                                                           #.###########.#.###.###.#####.#.#  
  #.#.#.........#.#.#.......#.#...#                                                           #.#.................#.#.#.#.....#  
  #.#.###.###.###.###.###.#.#######                                                           ###.#.###.###.###.#.#.#.#.###.#.#  
VL..#.#.#...#.#.#.#...#...#.#.#...#                                                           #...#...#...#...#.#.......#...#..SX
  #.###.#######.#####.#.#####.#.###                                                           #.#.#.###.###.#####.#####.#.###.#  
AA..#.........#.#.....#.........#..ZK                                                         #.#.#.#.....#.#.......#...#...#.#  
  #.#.#####.###.###.###.###.###.#.#                                                           #.#######.###########.#.###.#.###  
  #.....#.............#...#.#.#...#                                                         ZB....#.#.....#...#...#.#.....#...#  
  #########.###.#.###.#######.#.#.#                                                           #.###.#######.###.#####.#########  
  #.....#.#.#...#.#.....#.#.....#.#                                                           #.#.......#.#.......#.#.#...#....QX
  ###.#.#.###.#######.###.#########                                                           ###.###.#.#.#.#.#.###.#####.#.#.#  
  #...#...#.#.#.....#.#...#.#...#.#                                                           #.....#.#.....#.#.....#...#...#.#  
  #.#####.#.#######.###.###.#.###.#                                                           #.#####.#.#######.#.###.###.#####  
  #...#.#.#.........#.#.#.#.....#..MG                                                         #.#.#.#.#.#...#...#.#.....#.....#  
  ###.#.#.#.#.#.#.#.#.#.#.###.#.#.#                                                           #.#.#.#####.#######.#.#.#######.#  
RH....#.#...#.#.#.#...........#...#                                                         CA..#.#.#.#...#.........#.........#  
  #####.#######.#####.#.#####.#.###                                                           ###.#.#.###.#######.###.#####.#.#  
  #.#.#.......#.....#.#...#...#.#.#                                                           #.#.#.....#.....#...#...#...#.#.#  
  #.#.###.###.#.#.###.###########.#                                                           #.#.#.#.###.###.#.#.#######.###.#  
LV..#.....#...#.#.#.#.#...#.#......NU                                                         #.#...#.....#.#.#.#.#.#.#.....#.#  
  #.#.#####.#######.###.###.###.#.#                                                           #.#.#####.###.#######.#.#.#######  
  #...#.#...#...#.#.#.....#.#.#.#.#                                                           #.......#.#.#...#.#.#...#.#.#...#  
  #.###.#.###.#.#.#.###.#.#.#.###.#                                                           #.#.#.###.#.#.###.#.#.###.#.#.###  
  #.#.#.#.....#.........#.........#                                                         VO..#.#.#.#........................DV
  ###.#.###.###.#.#.###.#.#.#######                                                           #######.#######.#.#.#############  
  #.#.#...#.#...#.#.#...#.#.....#..VL                                                         #.....#.#.....#.#.#.#............BQ
  #.#.#.#####.#.#########.#.#####.#                                                           #.###.#.#.#############.###.#.###  
  #.......#.#.#.....#.#...#.#.....#                                                           #.#.....#...#.#.....#.....#.#...#  
  #.#####.#.#########.#########.###                                                           #.#####.###.#.###.#.#####.#.#.###  
MF....#...#...#...#.....#.....#...#                                                         BI....#...#.#...#...#.#.....#.#.#.#  
  #####.###.#.###.###.#.#.#######.#                                                           #.###.###.#.#####.#.###.#######.#  
  #.........#.........#...........#                                                           #...#.............#.........#...#  
  ###.###.###.#.#####.###.###.###.#          J       D   S         M   Q       Q       X      #####.###.###.#.###.#.#.#.#.###.#  
  #...#...#...#...#...#.#.#.#.#...#          M       V   X         F   F       H       I      #.#...#.....#.#...#.#.#.#.#.....#  
  #.#.###.###.#.#######.#.#.#.###.###########.#######.###.#########.###.#######.#######.#######.###.#######.###.###.###.#.#.###  
  #.#.#.#...#.#.#...........#...#.#.#.#.....#.#.........#.....#.....#.#...#.......#.#.............#.#.........#.#.....#.#.#.#.#  
  ###.#.#.#.###.#####.###.#.#######.#.#.###.#.#.#.#.#.###.#.#######.#.#.#####.#####.###.#.#.###.###.###.#.#.#.#####.#####.###.#  
  #.....#.#.#...#.....#...#.....#.......#.....#.#.#.#...#.#.....#...#.#.....#.......#...#.#...#.#.....#.#.#.#.#.........#.....#  
  #.###.#######.#####.###.#.#######.#.#.#.#####.#####.#####.#####.#.#.###.#.#####.#####.###.#####.#######.###.###.###.#####.###  
  #...#...#.......#.#...#.#...#.....#.#.#.#...#.....#.#.....#...#.#.....#.#.#.....#.#.....#...#.#.....#...#.#.#.....#...#.....#  
  #####.#####.###.#.#.#.#.#######.#.###.###.#.#.#.#########.#.###.###.###.#####.#.#.#.###.#####.###.#######.###.###.#.#####.#.#  
  #.....#.#...#.....#.#.#...#.....#.#...#...#.#.#...#.....#.....#.#...#.#.#.#...#.#...#.#.#.......#...#.#.....#...#.#...#...#.#  
  #####.#.#.#####.#####################.#.###.#.#.#####.#.#.#.#####.###.#.#.###.###.#.#.#####.#.#######.#.###.#.###.#.#.#.#.###  
  #...#.#.....#.....#...#.#...#.#.#.#.....#...#.#.#.#...#.#.#.#...#.#.#.#.....#...#.#.#...#.#.#.#.#.#.....#.....#.#.#.#.#.#...#  
  ###.###.#.###.#.###.###.###.#.#.#.#.#.###.###.###.###.#.###.#.#.#.#.#.#.#.#####.###.#.###.#.###.#.#########.###.###.#####.#.#  
  #.......#...#.#...#...#...#.........#.#...#.#.....#.#.#.#...#.#.#...#...#...#.....#.....#.............#.........#...#.....#.#  
  ###.###.#.#.#.#######.#.###########.#####.#.###.#.#.#.#.#.###.#.#.#######.#######.###.###.#.#.#.#.#######.#.#######.#####.###  
  #.....#.#.#.#...#.....#.#...#.#.....#.......#...#.#...#.....#.#.....#.#...#.....#.#.......#.#.#.#...#.#...#.......#.#.......#  
  ###.###.#.###########.#.###.#.#.###########.#.#######.#######.#####.#.###.#.#####.#.###.#.#####.#####.###.#.###.#.#.#.###.###  
  #...#...#.#.......................#.#.....#.#.#...#.....#.........#.#.........#...#...#.#.#...#.#.#.....#.#.#...#.#.#.#.....#  
  ###.###############.###.#.###.#.###.#####.#.#.#.#####.#######.#.#.#####.###.###.#.#.#######.###.#.#.#######.#.#.#.#.#####.###  
  #...#.........#.....#...#.#...#.#...........#...#.#...#.#.....#.#.#.#.....#.#.#.#.#.#.........#.#.....#.#...#.#.#.#.#.......#  
  ###.#######.#############.#.#######.#.#.#.#.#.###.###.#.#####.###.#.#.#.#.###.###.#.###.#.#.#######.###.###.###.#.###.###.#.#  
  #.....#.............#.#.#.#.#...#...#.#.#.#.#.#...#.#...#.......#.#.#.#.#.#.......#.....#.#...#.#.#...#.#.#...#.#...#.#...#.#  
  ###.#####.#.#######.#.#.#.#.###.#########.###.###.#.#.#####.###.###.#.###.#####.#########.#####.#.###.#.#.###.###.###.#.###.#  
  #.......#.#.#...#.#.......#.#...............#.......#.#...#.#.......#.#...#.#.#...#.....#.........#.#.......#...#.#...#.#...#  
  ###.#####.#.###.#.#.#.#.#.###.#####.#.#.#.#########.#.###.###.#.#.#######.#.#.#.#.#.###.#.###.#.###.#.#.#########.###.###.###  
  #...#.....#.#.......#.#.#.#.#.#.....#.#.#...#.....#.#.#.#.#...#.#.....#.#...#.#.#.#...#.#...#.#.#.....#.......#.....#...#...#  
  ###.###.#.#.###.###.#####.#.#######.#######.###.###.#.#.#.###.#.#.#####.#.###.###.#.###.#.#########.#.###.#.###.#.###.#.###.#  
  #.....#.#.#.#...#.#.#.........#.....#.#.#...#...#...#.......#.#.#.#.......#.#.....#.#...#...........#...#.#.#...#.#...#...#.#  
  ###.###.#####.#.#.#.###.#.#####.#####.#.#.#.###.###.#####.#.#.###.#.###.###.#####.#.#.###.#.#.#.#######.###########.###.#.###  
  #.....#...#.#.#...#.#...#.#.#.#.#.#.....#.#.#.......#.....#.#.#.#.#.#.........#...#.#.....#.#.#.......#.#.#...#...#...#.#...#  
  #.#.#####.#.###.#########.#.#.###.#.#.#.###.###.#.###.#######.#.#########.#.#####.#.#######.###.#######.#.#.###.#########.###  
  #.#.#.......#.......#.....#.#.#.....#.#.....#.#.#.#.......#.........#.....#.#.#.#.#.......#...#...#...#.............#.#.#.#.#  
  ###.#####.#.###.#.#########.#.#.###########.#.#.#####.#.#####.#.#.###.###.###.#.#.#.###.#######.#####.###.#.#.#####.#.#.###.#  
  #.......#.#.#...#.#.............#.............#...#...#.#.....#.#...#.#.....#.....#.#.........#.........#.#.#.....#.........#  
  #########################################.#######.#####.#####.###########.###.#########.#####################################  
                                           Z       X     Z     N           H   N         F                                       
                                           K       I     N     U           Q   K         J                                       
